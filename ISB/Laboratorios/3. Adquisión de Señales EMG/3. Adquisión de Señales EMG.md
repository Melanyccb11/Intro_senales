<h1 style="text-align: center;">Laboratorio 3: Uso de BITalino para EMG</h1>

</h3>Nombre de los Integrantes y código:

1. Melany Cama Bahamonde 72128361
2. Alessandra Valle Montoya  71098563
3. Catherine Boggio Vidal 71329106
4. Juan Jose Sandoval Barrantes 74145560
</p>

<h2 style="text-align: center;">Tabla de Contenidos</h2>

1. [Objetivos](#objetivo)
2. [Introducción](#intro)
3. [Materiales](#matereiales)
4. [Fotos de la conexión usada](#conex)
5. [Videos obtenidos](#videos)
6. [Ploteo de la señal en OpoenSigns](#opensign)
7. [Resumen y Explicación de la señal ploteada](#explic)
8. [Archivo de los datos de la señal ploteada](#archivosenal)
9. [Ploteo de la señal en Python](#python)
10. [Bibliografía](#Bibliografía)

<a id = "objetivo" style></a>
<h2 style = "text-align: center;">Objetivos</h2>
- Adquirir señales biomédicas de EMG y ECG. <br />
- Hacer una correcta configuración de BiTalino. <br />
- Interpretar las señales EMG con software OpenSignals (r)evolution. <br />
- Plotear los datos en Python. <br />

<a id = "intro" style></a>
<h2 style = "text-align: center;">Introducción</h2>

La electromiografía (EMG) es una técnica diagnóstica que se utiliza para evaluar y registrar la actividad eléctrica producida por los músculos esqueléticos. Esta técnica permite entender cómo los músculos responden a señales nerviosas enviadas desde el cerebro. 

Cuando un músculo se activa, produce una pequeña cantidad de electricidad. La electromiografía capta estas señales eléctricas utilizando electrodos que pueden ser superficiales (colocados sobre la piel) o intramusculares (insertados dentro del músculo). Las señales capturadas son luego analizadas para determinar si hay alguna anormalidad en la actividad muscular [1].

<p align="center">
  <img width="500" height="300" src="https://github.com/Melanyccb11/Intro_senales/blob/main/Im%C3%A1genes/fig1_bitalino.png">
</p>
<h5 align="center">
  Figura 1. Bitalino conectado mediante electrodos al cuerpo humano. Recuperada de [2].
</h5>

El principio de funcionamiento de la electromiografía (EMG) 

1. Generación de la Señal EMG:
   
Cada vez que se envía una señal nerviosa a un músculo para que se contraiga, las células musculares (fibras musculares) responden generando una pequeña señal eléctrica propia. Esta señal es el resultado de los flujos iónicos a través de la membrana de las células musculares, que crean potenciales de acción (cambios en el voltaje a lo largo de la membrana de la célula). Estos potenciales de acción se propagan a lo largo de las fibras musculares y son los responsables de la contracción muscular.

2. Detección de la Señal:

Para capturar estas señales eléctricas, se utilizan electrodos que pueden ser de superficie (adheridos a la piel sobre el músculo de interés) o intramusculares (insertados dentro del músculo mediante una aguja fina). Los electrodos detectan las sumas de los potenciales de acción de las fibras musculares activas que están cerca de ellos.

3. Amplificación y Procesamiento:

Las señales EMG capturadas por los electrodos son generalmente débiles y requieren amplificación para poder ser analizadas adecuadamente.
Una vez amplificadas, las señales pueden ser filtradas para reducir el ruido y mejorar la calidad de la señal para su análisis.

5. Registro y Análisis:  

Las señales EMG amplificadas y procesadas se registran y se visualizan en un dispositivo de grabación, lo que permite a los médicos o investigadores observar la forma, tamaño y frecuencia de las ondas eléctricas generadas durante la contracción muscular. El análisis de estas ondas proporciona información sobre la salud neuromuscular, la fuerza de contracción del músculo, y puede ayudar a identificar patologías neuromusculares [1]. 

### Bitalino

Módulo basado en el mismo microcontrolador que Arduino 1. Este kit está compuesto por varios módulos individuales que se utilizan para la recogida de datos biomédicos. En este laboratorio, se utilizó el que se encuentra diseñado para obtener señales electromiográficas.
El kit incluye lo siguiente:
- Core BT de BITalino (r)evolution: Unidad central que procesa y transmite los datos.
- Sensor de EMG ensamblado: Captura las señales EMG.
- Cable de electrodos: Generalmente se coloca en un hueso como referencia (tierra), y cuenta con otros dos que son positivo y negativo colocados en el músculo.
- Electrodos desechables de Ag/AgCl con gel: Para asegurar una buena conductividad y adherencia a la piel.
- Dongle Bluetooth: Para la comunicación inalámbrica con otros dispositivos [3].

### Bicep branquial

El bíceps braquial es un músculo flexor anterior que ayuda en los movimientos del hombro, brazo, codo y antebrazo. Consta de dos cabezas: la cabeza larga es la parte lateral y la cabeza corta es la parte medial; también incluye el tendón del bíceps braquial [4][5].

<p align="center">
  <img width="500" height="300" src="https://github.com/Melanyccb11/Intro_senales/blob/main/Im%C3%A1genes/bicep_braqiu.png">
</p>
<h5 align="center">
  Figura 2. Bicep branquial. Recuperado de [5].
</h5>

<br />

<a id = "matereiales"></a>  
<h2 style = "text-align: center;">Materiales</h2>

<div align="center">

|   **Dispositivo**   | **Descripción** |  **Imagen**  |
|:-------------------:|:---------------:|:------------:|
|      OpensSign      | Ofrece la detección y reconocimiento de gestos avanzados con una interfaz intuitiva y fácil integración. |<img width="200" height="150" src="https://github.com/Melanyccb11/Intro_senales/blob/main/Im%C3%A1genes/BITalino.jpg">|
|       BITalino      | Es un kit de herramietnas de prototipado rápido para proyectos de salud y bienestar personal, Incluye sensores inalámbricos y una plataforma de software para adquirir, procesar y visualizar datos biomédicos |<img width="200" height="150" src="https://github.com/Melanyccb11/Intro_senales/blob/main/Im%C3%A1genes/OPENSIGNAL.png">|
|     Electrodos      | Son dispositivos diseñados para registrar la actividad eléctrica de los músculos esqueléticos |<img width="200" height="150" src="https://github.com/Melanyccb11/Intro_senales/blob/main/Im%C3%A1genes/electrodo.png">|

</div>


<a id = "conex"></a>
<h2 style = "text-align: center;">Fotos de la conexión usada</h2>

Para la colocación de los 3 electrodos se tiene en cuenta que hay 3: positivo (músculo), negativo (músculo) y de referencia (hueso) como se puede ver la Figura 3.

<p align="center">
  <img width="660" height="400" src="https://github.com/Melanyccb11/Intro_senales/blob/main/Im%C3%A1genes/colocar_electro.png">
</p>
<h5 align="center">
  Figura 3. Posicionamiento de los electrodos en el bíceps braquial. Recuperado de [2].
</h5>

Para las conxiones en el Bitalino conectamos el bitalino en el puerto A1 que es el que realiza la lectura de EMG, como se puede ver la Figura 4 y 5.

<p align="center">
  <img width="660" height="400" src="https://github.com/Melanyccb11/Intro_senales/blob/main/Im%C3%A1genes/Ponerpuertos.png">
</p>
<h5 align="center">
  Figura 4. Conexiones del BITalino y los electrodos. Elaboración propia.
</h5>
<p align="center">
  <img width="660" height="400" src="https://github.com/Melanyccb11/Intro_senales/blob/main/Im%C3%A1genes/conezzion_jj.png">
</p>
<h5 align="center">
  Figura 5. Posicionamiento de los electrodos durante la práctica. Elaboración propia
</h5>



<a id = "videos"></a>
<h2 style = "text-align: center;">Videos obtenidos</h2>
En videos obtenido podemos ver que la toma de toma de datos es realizada a Juanjo y... 

<div align="center">
    <video src="https://github.com/Melanyccb11/Intro_senales/blob/main/ISB/Laboratorios/3.%20Adquisi%C3%B3n%20de%20Se%C3%B1ales%20EMG/videojuanjo.mp4">
</div>
[ver video][https://github.com/Melanyccb11/Intro_senales/blob/main/ISB/Laboratorios/3.%20Adquisi%C3%B3n%20de%20Se%C3%B1ales%20EMG/videojuanjo.mp4]
<h5 align="center">
  Video [1]: Recoleccioón de datos 
</h5>

<div align="center">
    <video src="https://github.com/Melanyccb11/Intro_senales/blob/main/ISB/Laboratorios/3.%20Adquisi%C3%B3n%20de%20Se%C3%B1ales%20EMG/Grabaci%C3%B3n%202024-04-12%20101854.mp4">

</div>

<h5 align="center">
  Video [2]: Video de ploteo de la señal con OpenSign
</h5>


<a id = "opensign"></a>
<h2 style = "text-align: center;">Ploteo de la señal en OpoenSigns</h2>
 <p align="center">
 Las muestras fueron tomadas a una frecuencia de 1000Hz: 
 </h5>
 <img width="660" height="400" src="https://github.com/Melanyccb11/Intro_senales/blob/main/Im%C3%A1genes/WhatsApp%20Image%202024-04-12%20at%2010.17.33%20AM.jpeg">
</p>
<h5 align="center">
  Figura [2]: Conexiones del BITalino
</h5>

<a id = "explic"></a>
<h2 style = "text-align: center;">Resumen y Explicación de la señal ploteada</h2>
COMENTAR QUE SE ESTA MIRANDOOO... TODO FANCY AAS
MENCIONAR EL RUIDO QUE SE OBTUVO POR BITALINO SIN CASE

<a id = "archivosenal"></a>
<h2 style = "text-align: center;">Archivo de los datos de la señal ploteada</h2>
</h5>
[Documentos (.txt)](https://github.com/Melanyccb11/Intro_senales/blob/main/ISB/Laboratorios/3.%20Adquisi%C3%B3n%20de%20Se%C3%B1ales%20EMG/text_EMG.txt)


<a id = "python"></a>
<h2 style = "text-align: center;">Ploteo de la señal en Python</h2>
</p>
Codigo prinicipal:
</p>
-(https://github.com/Melanyccb11/Intro_senales/blob/main/ISB/Laboratorios/3.%20Adquisi%C3%B3n%20de%20Se%C3%B1ales%20EMG/ploteo_de_senial.py)
</p>
Codigo adicional para eliminar archivo de la señal:
</p>
-[Sin ruido](https://github.com/Melanyccb11/Intro_senales/blob/main/ISB/Laboratorios/3.%20Adquisi%C3%B3n%20de%20Se%C3%B1ales%20EMG/graficas_se%C3%B1ales_sinruido.py)
</p>
-[Con ruido](https://github.com/Melanyccb11/Intro_senales/blob/main/ISB/Laboratorios/3.%20Adquisi%C3%B3n%20de%20Se%C3%B1ales%20EMG/grafica_se%C3%B1ales_conruido.py)


Las pruebas se realizaron primero en estado de reposo,la cual dura un total de X segundos. Esto se puede observar en la siguiente gráfica.

- Señal sin movimiento:
Debido a que la señal era pequeña se amplió la imagen reduciendo la amplitud para una mejor observación de la señal. Se puede observar amplitudes parecidas, ya que corresponde a una señal sin movimiento.
 <img width="660" height="400" src="https://github.com/Melanyccb11/Intro_senales/blob/main/Im%C3%A1genes/sinmov.jpeg">
</p>
<h5 align="center">
  Figura [2]: CSeñal obtenida sin movimienyo
</h5>

- Señal con movimiento:
Debido a que la señal era pequeña se amplió la imagen reduciendo la amplitud para una mejor observación de la señal. Se puede observar amplitudes parecidas, ya que corresponde a una señal sin movimiento.
-Se puede observar picos maximos, pertenecerían a los movimientos obtenidos al realizar el puño cerrado. En el puño cerrado, en la cual las unidades motoras se activan con mayor frecuencia.
 <img width="660" height="400" src="https://github.com/Melanyccb11/Intro_senales/blob/main/Im%C3%A1genes/rc.jpeg">
</p>

- De este mismo rango de valores se sacó la DTFT  a nuestra señal y transformarla del dominio del tiempo al dominio de la frecuencia, se observa que predomina la actividad en 2 frecuencias: una a BLA Hz a proximadamente y la otra a BLA Hz aproximadamente.
<h5 align="center">
  Figura [2]: Conexiones del BITalino
</h5>

Ademas nsotros relizamos un código para elimiar el ruido de la señal, esto porque como se puede ver en el video utilizamos el arduino sin carcasa, porlo que habla interferecnia con la señal de la comptadora y...blabla 

<img width="660" height="400" src="https://github.com/Melanyccb11/Intro_senales/blob/main/Im%C3%A1genes/conruido.jpeg">
</p>
<h5 align="center">
  Figura [2]:Señal orginal
</h5>

<img width="660" height="400" src="https://github.com/Melanyccb11/Intro_senales/blob/main/Im%C3%A1genes/after.jpeg">
</p>
<h5 align="center">
  Figura [2]: Señal filtrada en pyton
</h5>



<a id = "Bibliografia"></a>
<h2 style = "text-align: center;">Bibliografía</h2>
[1] PONGAN LAS CITAS EN IEEEde esteeee
https://support.pluxbiosignals.com/wp-content/uploads/2022/04/HomeGuide1_EMG.pdf 

