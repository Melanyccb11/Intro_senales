<h1 style="text-align: center;">Laboratorio 4: Uso de BITalino para ECG</h1>

</h3>Nombre de los Integrantes y código:

1. Melany Cama Bahamonde 72128361
2. Alessandra Valle Montoya  71098563
3. Catherine Boggio Vidal 71329106
4. Juan Jose Sandoval Barrantes 74145560
</p>

<h2 style="text-align: center;">Tabla de Contenidos</h2>

1. [Objetivos](#objetivo)
2. [Introducción](#intro)
3. [Materiales y equipos](#matereiales)
4. [¿Cómo funciona e interpreta el ECG en un BITalino?](#conex)
5. [Metodología](#metodo)
6. [Videos obtenidos](#videos)
7. [Ploteo de la señal en OpenSignals](#opensign)
8. [Resumen y Explicación de la señal ploteada](#explic)
9. [Archivo de los datos de la señal ploteada](#archivosenal)
10. [Ploteo de la señal en Python](#python)
11. [Bibliografía](#Bibliografía)

<a id = "objetivo" style></a>
<h2 style = "text-align: center;">Objetivos</h2>
- Adquirir señales biomédicas de ECG. <br />
- Hacer una correcta configuración de BiTalino. <br />
- Interpretar las señales ECG con software OpenSignals (r)evolution. <br />
- Plotear los datos en Python. <br />
- Comparar los resultados medidos en cada momento propuesto por la metodología <br />

<a id = "intro" style></a>
<h2 style = "text-align: center;">Introducción</h2>

El electrocardiograma (ECG) es una prueba diagnóstica que registra la actividad eléctrica del corazón a lo largo del tiempo utilizando electrodos colocados en la piel. Esta actividad eléctrica es generada por el sistema de conducción del corazón y se traduce en ondas y complejos que se pueden visualizar en el ECG. Las principales ondas y segmentos identificables en un ECG son:
- Onda P: Representa la despolarización de las aurículas, es decir, su contracción.
- Complejo QRS: Refleja la despolarización de los ventrículos, que es la contracción ventricular.
- Onda T: Indica la repolarización ventricular, o el proceso de recuperación de los ventrículos para prepararse para el siguiente latido
- Segmento PR: Este segmento refleja el tiempo en el que el impulso eléctrico viaja desde los nódulos auriculares hasta los ventrículos, justo antes de que se produzca la contracción ventricular.
- Intervalo PR: Representa el tiempo que tarda el impulso eléctrico en pasar desde el inicio de la contracción auricular hasta el inicio de la contracción ventricular.
- Segmento ST: Indica el punto en el cual los ventrículos están completamente despolarizados.
- Intervalo QT: Representa el tiempo total de la actividad eléctrica ventricular, abarcando tanto la despolarización (contracción) como la repolarización (relajación) de los ventrículos [1].

 <p align="center">
<img width="450" height="500" src="https://github.com/Melanyccb11/Intro_senales/blob/main/ISB/Laboratorios/4.%20Adquisi%C3%B3n%20de%20Se%C3%B1ales%20ECG/Im%C3%A1genes%20LAB4/ONDACIRA.png">
  </p>
<h5 align="center">
  Figura 1. Ondas del corazón [2].
</h5>
<br />

<a id = "matereiales"></a>  
<h2 style = "text-align: center;">Materiales y equipos</h2>

<div align="center">

|   **Dispositivo**   | **Descripción** |  **Imagen**  |
|:-------------------:|:---------------:|:------------:|
|      OpensSign      | Ofrece la detección y reconocimiento de gestos avanzados con una interfaz intuitiva y fácil integración. |<img width="200" height="150" src="https://github.com/Melanyccb11/Intro_senales/blob/main/Im%C3%A1genes/OPENSIGNAL.png">|
|       BITalino      | Kit biomédico para la adquisición de señales, su sistema incluye una variedad de sensores para monitorear distintos tipos de señales fisiológicas, como la electromiografía (EMG), electrocardiografía (ECG), etc [3][4]. |<img width="200" height="150" src="https://github.com/Melanyccb11/Intro_senales/blob/main/ISB/Laboratorios/4.%20Adquisi%C3%B3n%20de%20Se%C3%B1ales%20ECG/Im%C3%A1genes%20LAB4/bitalino.jpeg">|
|     Electrodos      | Son dispositivos diseñados para registrar la actividad eléctrica del corazón |<img width="200" height="150" src="https://github.com/Melanyccb11/Intro_senales/blob/main/Im%C3%A1genes/electrodo.png">|
|    FLUKE ProSim 4   | Simulador de signos vitales portátil y avanzado que utiliza tecnología táctil para facilitar pruebas rápidas y eficientes de monitores de pacientes, permitiendo completar las comprobaciones en menos de 60 segundos. Este compacto dispositivo ofrece simulaciones de ECG de 12 derivaciones, respiración, presión sanguínea invasiva (IBP) y no invasiva (NIBP) [5]. |<img width="200" height="150" src="https://github.com/Melanyccb11/Intro_senales/blob/main/ISB/Laboratorios/4.%20Adquisi%C3%B3n%20de%20Se%C3%B1ales%20ECG/Im%C3%A1genes%20LAB4/FLUK.jpg">|

</div>


<a id = "conex"></a>
<h2 style = "text-align: center;">¿Cómo funciona e interpreta el ECG en un BITalino?</h2>

La adquisición de la señal de electrocardiograma (ECG) con BITalino se caracteriza por ser no invasiva, detectada a través de tres electrodos de Ag-AgCl designados como AL, RA y RF. BITalino permite la medición de una sola derivación con una frecuencia de muestreo de 1000 Hz. Para la interpretación del electrocardiograma, nos basamos en los valores normales definidos en la literatura [6], que se detallan para cada segmento mostrado en la Figura 1.
</p>
Para la onda P, se establecen los siguientes criterios:

- La deflexión negativa normalmente es inferior a 1 mm.
- La duración de la onda P debe ser menor o igual a 0.12 segundos.
- La amplitud de la onda P debe ser inferior a 0.25 mm en las derivaciones de las extremidades.
  </p>
Respecto al complejo QRS:

- Es crucial destacar que este indica una despolarización ventricular más lenta de lo normal si su duración es menor a 0.12 segundos. Por el contrario, si es mayor, se considera un complejo anormalmente ancho.
</p>
En cuanto al intervalo PR:

- El intervalo PR normalmente oscila entre 0.12 y 0.22 segundos, aunque se establece un límite superior de referencia de 0.20 segundos en adultos jóvenes.
- Un intervalo prolongado (>0.22s) sugiere la presencia de un bloqueo AV de primer grado.
- Por otro lado, un intervalo acortado (<0.12s) indica la existencia de una vía accesoria [6].

</h5>

<a id = "metodo" style></a>
<h2 style = "text-align: center;">Metodolodía</h2>

### Configuración de ECG en Bitalino
</p>
De acuerdo con la referencia [4], es necesario conectar los electrodos en el puerto A2 del dispositivo Bitalino. Posteriormente, se debe configurar el Bitalino, empleamos el canal dos para la adquisición de datos de electrocardiograma (ECG) con una frecuencia de muestreo de 1000Hz.</p>

### Colocación de electrodos
</p>
La ubicación de los electrodos se determinó en función de las derivaciones estándar del ECG. Nosotros utilizamos la derivación I de Einthoven, este registra la diferencia de voltaje entre dos puntos específicos del cuerpo: el electrodo positivo (rojo) se sitúa en la brazo iquierdo (LA), mientras que el electrodo negativo (negro) se coloca en el brazo derechho (RA). El punto de referencia (REF) en color blanco se coloca en la cosito. La corriente eléctrica fluye naturalmente de un brazo al otro, y la diferencia de potencial entre estos dos puntos se registra como un trazado en el electrocardiograma [3]. </p>
<p align="center">
 <img width="660" height="400" src="https://github.com/Melanyccb11/Intro_senales/blob/main/ISB/Laboratorios/4.%20Adquisi%C3%B3n%20de%20Se%C3%B1ales%20ECG/Im%C3%A1genes%20LAB4/posicionElectrodos.jpeg">
<h5 align="center">
  Figura N. Posicionamiento de los electrodos. Elaboración propia.
</h5>

### Adquisición de la Señal
</p>
Para este laboratorio utilizamos 5 momentos para el ensayo indicados por la guía [b]. Para el primer momento fue el estado en reposo por 30 segundos con respiración normal (primera medición), seguido de 30 segundos de inhalar-retener-exhalar 5 segundos cada uno (segunda medición) hasta que acabe el tiempo de medición. Posteriormente, se realizaron 2 mediciones para comparar el pre (tercera medición) y post (cuarta medición) actividad física que realizó nuestro objeto de prueba; y por último, se esperó 30 segundos más y seguido se realizó una medición de inhalar-retener-exhalar 10 segundos cada uno por 30 segundos.Todas estas señal fueron adquiridas por el BITalino y se interpretaron en OpenSign para posterior evaluación. Para mejor explicación esto se puede ver en el video [1] </p>

### Adquisición de la Señal
</p>
En esta actividad se simuló un paro cardiaco, en donde se obtieron 5 etapas a lo largo de la simulación, se evaluó la señal en OpenSign. Para configuración de los electrodos siguió la configuración propuesta con respecto a LA, RA y RF.</p>
 <p align="center">
<p>
   <img src="https://github.com/Melanyccb11/Intro_senales/blob/main/ISB/Laboratorios/4.%20Adquisi%C3%B3n%20de%20Se%C3%B1ales%20ECG/Im%C3%A1genes%20LAB4/FLUK.jpg" width="500" height="300"/>
   <img src="https://github.com/Melanyccb11/Intro_senales/blob/main/ISB/Laboratorios/4.%20Adquisi%C3%B3n%20de%20Se%C3%B1ales%20ECG/Im%C3%A1genes%20LAB4/configFLUK.jpg" width="500" height="300">
</p>
<h5 align="center">
  Figura N. poncitaaaa.
</h5>
<br />
### Procesamiento de la señal
</p>
Después de la toma de datos, estos se exportaron a una computadora para su ejecución en Python. Aquí, las señales del electrocardiograma (ECG) fueron graficadas y filtradas con el fin de realizar un análisis más detallado.</p>


<a id = "videos"></a>
<h2 style = "text-align: center;">Videos obtenidos</h2>
Los video obtenidos los hemos editado, simulando los diferentes momentos propuestos por la metodolosía, con el objetivo de una mejor visulización de los pasos seguidos <br />
</h5>

<div align="center">
    <video src="link">
</video>
</div>

<h5 align="center">
  Video [1]: Video siguiendo la metodología
</h5>
</h5>

<div align="center">
    <video src="https://github.com/Melanyccb11/Intro_senales/assets/143018589/d992ce1a-1593-4df9-9d54-ab64e604653b">
</video>
</div>

<h5 align="center">
  Video [2]: Video la señal en estado reposo con OpenSign
</h5>
</h5>

<div align="center">
    <video src="k">
</video>
</div>


<h5 align="center">
  Video [3]: Video de las etapas del simulador de paro cardiaco en FLUKE ProSim 4 
</h5>
</h5>




<div align="center">
    <video src="https://github.com/Melanyccb11/Intro_senales/assets/143018589/9fac69d8-ec25-48d4-b053-2486d346d775">
</video>
</div>

<h5 align="center">
  Video [4]: Video la señal proviniente del FLUKE ProSim 4 con OpenSign
</h5>
</h5>

<a id = "opensign"></a>
<h2 style = "text-align: center;">Ploteo de la señal en OpenSignals</h2>
Tal como se mencionó anteriormente, las muestras se recolectaron a una frecuencia de muestreo de 1000 Hz. Dado que nos encontramos en un entorno real, es importante tener en cuenta que el ruido y la interferencia pueden afectar la calidad de los datos del electrocardiograma (ECG). Por lo tanto, en la figura [6], se pueden apreciar aproximadamente los segmentos e intervalos de las ondas, teniendo en consideración estos posibles factores de interferencia.
 </p>

<p align="center" style="margin-bottom:0">
<img src="https://github.com/Melanyccb11/Intro_senales/blob/main/ISB/Laboratorios/4.%20Adquisi%C3%B3n%20de%20Se%C3%B1ales%20ECG/Im%C3%A1genes%20LAB4/SegmentosOpenSign.jpg" align="center" width="500" height="300"/>
<div align="center"> <i>Figura 4: Señal en reposo OpenSignal</i></div>
<p>
 
<p align="center" style="margin-bottom:0">
<img src="despuesdelejercicio" align="center" width="500" height="300"/>
<div align="center"> <i>Figura 4: Después del ejercicio</i></div>
<p>

 <p align="center" style="margin-bottom:0">
<img src="despuesdelejercicio" align="center" width="500" height="300"/>
<div align="center"> <i>Etapa 2 del paro cardiaco simulador por FLUKE ProSim 4 </i></div>
<p>

 <p align="center" style="margin-bottom:0">
<img src="despuesdelejercicio" align="center" width="500" height="300"/>
<div align="center"> <i>Figura 4: Etapa 3 del paro cardiaco simulador por FLUKE ProSim 4</i></div>
<p>

 
<br />
 
<a id = "explic"></a>
<h2 style = "text-align: center;">Resumen y Explicación de la señal ploteada</h2>

bliblbibibb


<a id = "archivosenal"></a>
<h2 style = "text-align: center;">Archivo de los datos de la señal ploteada</h2>
</h5>

<p> <a href= NormalBreath30s.txt>Señal con respiración normal por 30 seg</a></p>
<p> <a href= InHoldEx5s.txt>Señal inhalando-retiniendo-exhalando por 5 seg</a></p>
<p> <a href= BeforeBurpee30s.tx>Señal antes de los burpees</a></p>
<p> <a href= ReposandoBurpee30s.txt>Señal después de los burpees</a></p>
<p> <a href= Exalando10s.txt>Señal inhalando-retiniendo-exhalando por 10 seg</a></p>
</p>
<p> <a href= Simulador.txt>Señal simulada por FLUKE ProSim 4 </a></p>


<a id = "python"></a>
<h2 style = "text-align: center;">Ploteo de la señal en Python</h2>
</p>
Codigo prinicipal:
</p>
<p> <a href= ploteo_de_senial.py>falta</a></p>
</p>
Codigo adicional para eliminar archivo de la señal:
</p>
<p> <a href= graficas_se%C3%B1ales_sinruido.py>falta</p>
</p>
<p> <a href= grafica_se%C3%B1ales_conruido.py>flata</p>
</p>

Las pruebas se realizaron primero en estado de reposo,la cual dura un total de X segundos. Esto se puede observar en la siguiente gráfica.

### Señal con respiración normal por 30 seg (reposo)
blieblei
</p>
<p align="center">
<img width="660" height="400" src="fotopy">
</p>
<h5 align="center">
  Figura 8: Señal obtenida sin movimiento
</h5>

<p align="center">
<img width="660" height="400" src="fotopy">
</p>
<h5 align="center">
  Figura 8: Señal obtenida sin movimiento
</h5>

- Interpretación: chatpgt mi dios 
</p>


### Señal inhalando-retiniendo-exhalando por 5 seg
blieblei
</p>
<p align="center">
<img width="660" height="400" src="fotopy">
</p>
<h5 align="center">
  Figura 8: Señal obtenida sin movimiento
</h5>

<p align="center">
<img width="660" height="400" src="fotopy">
</p>
<h5 align="center">
  Figura 8: Señal obtenida sin movimiento
</h5>

- Interpretación: chatpgt mi dios 
</p>


### Señal antes de los burpees
blieblei
</p>
<p align="center">
<img width="660" height="400" src="fotopy">
</p>
<h5 align="center">
  Figura 8: Señal obtenida sin movimiento
</h5>

<p align="center">
<img width="660" height="400" src="fotopy">
</p>
<h5 align="center">
  Figura 8: Señal obtenida sin movimiento
</h5>

- Interpretación: chatpgt mi dios 
</p>

### Señal después de los burpees
blieblei
</p>
<p align="center">
<img width="660" height="400" src="fotopy">
</p>
<h5 align="center">
  Figura 8: Señal obtenida sin movimiento
</h5>

<p align="center">
<img width="660" height="400" src="fotopy">
</p>
<h5 align="center">
  Figura 8: Señal obtenida sin movimiento
</h5>

- Interpretación: chatpgt mi dios 
</p>


### Señal inhalando-retiniendo-exhalando por 10 seg
blieblei
</p>
<p align="center">
<img width="660" height="400" src="fotopy">
</p>
<h5 align="center">
  Figura 8: Señal obtenida sin movimiento
</h5>

<p align="center">
<img width="660" height="400" src="fotopy">
</p>
<h5 align="center">
  Figura 8: Señal obtenida sin movimiento
</h5>

- Interpretación: chatpgt mi dios 
</p>


### Señal simulada por FLUKE ProSim 4
blieblei
</p>
<p align="center">
<img width="660" height="400" src="fotopy">
</p>
<h5 align="center">
  Figura 8: Señal obtenida sin movimiento
</h5>

<p align="center">
<img width="660" height="400" src="fotopy">
</p>
<h5 align="center">
  Figura 8: Señal obtenida sin movimiento
</h5>

- Interpretación: chatpgt mi dios 
</p>


Además nosotros realizamos un código que se encarga de realizar el filtrado de la señal, esto porque como se puede ver en el video utilizamos el arduino sin carcasa y cerca de una laptop, lo que ocasiona una interferencia y una mala interpretación de los datos. 
NO SI LA LLEGAMOS A HACER .....

<p align="center">
<img width="660" height="400" src="pls">
</p>
<h5 align="center">
  Figura 10:Señal orginal
</h5>
<p align="center">
<img width="660" height="400" src="pls ">
</p>
<h5 align="center">
  Figura [2]: Señal filtrada en pyton
</h5>



<a id = "Bibliografía"></a>
<h2 style = "text-align: center;">Bibliografía</h2>
[1] Guyton & Hall. Tratado de fisiología médica - 9788413820132.</p>
[2]	A. L. Farré y C. M. Miguel, Libro de la salud cardiovascular del Hospital Clínico San Carlos y la Fundación BBVA. Fundación BBVA, 2009. Accedido: 20 de abril de 2024. [En línea]. Disponible en: https://dialnet.unirioja.es/servlet/libro?codigo=429356 </p>
[3]	«BITalino (r)evolution Lab Home Guide» Pluxbiosignals.com. [En línea]. Disponible en: https://support.pluxbiosignals.com/wp-content/uploads/2022/04/HomeGuide2_ECG.pdf. [Consultado: 19-abr-2024]. </p>
[4] «BITalino (r)evolution user manual» Pluxbiosignals.com. [En línea]. Disponible en: https://support.pluxbiosignals.com/wp-content/uploads/2021/11/bitalino-revolution-user-manual.pdf. [Consultado: 20-abr-2024].</p>
[5]	«ProSim 4 Vital Sign Patient Simulator | Fluke Biomedical». Accedido: 19 de abril de 2024. [En línea]. Disponible en: https://www.flukebiomedical.com/products/biomedical-test-equipment/patient-simulators/prosim-4-vital-signs-patient-simulator </p>
[6] «ECG interpretation: Characteristics of the normal ECG (P-wave, QRS complex, ST segment, T-wave)», Cardiovascular Education. Accedido: 20 de abril de 2024. [En línea]. Disponible en: https://ecgwaves.com/topic/ecg-normal-p-wave-qrs-complex-st-segment-t-wave-j-point/
