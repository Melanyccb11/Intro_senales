<h1 style="text-align: center;">Laboratorio 3: Uso de BITalino para EMG</h1>

</h3>Nombre de los Integrantes y código:

1. Melany Cama Bahamonde 72128361
2. Alessandra Valle Montoya  71098563
3. Catherine Boggio Vidal 71329106
4. Juan Jose Sandoval Barrantes 74145560
</p>

<h2 style="text-align: center;">Tabla de Contenidos</h2>

1. [Objetivos](#objetivo)
2. [Introducción](#intro)
3. [Materiales y equipos](#matereiales)
4. [¿Cómo funciona el ECG en un BITalino?](#conex)
5. [Metodología](#metodo)
6. [Videos obtenidos](#videos)
7. [Ploteo de la señal en OpenSignals](#opensign)
8. [Resumen y Explicación de la señal ploteada](#explic)
9. [Archivo de los datos de la señal ploteada](#archivosenal)
10. [Ploteo de la señal en Python](#python)
11. [Bibliografía](#Bibliografía)

<a id = "objetivo" style></a>
<h2 style = "text-align: center;">Objetivos</h2>
- Adquirir señales biomédicas de ECG. <br />
- Hacer una correcta configuración de BiTalino. <br />
- Interpretar las señales ECG con software OpenSignals (r)evolution. <br />
- Plotear los datos en Python. <br />
- Comparar los resultados medidos en cada momento propuesto por la metodología <br />

<a id = "intro" style></a>
<h2 style = "text-align: center;">Introducción</h2>



<br />

<a id = "matereiales"></a>  
<h2 style = "text-align: center;">Materiales y equipos</h2>

<div align="center">

|   **Dispositivo**   | **Descripción** |  **Imagen**  |
|:-------------------:|:---------------:|:------------:|
|      OpensSign      | Ofrece la detección y reconocimiento de gestos avanzados con una interfaz intuitiva y fácil integración. |<img width="200" height="150" src="https://github.com/Melanyccb11/Intro_senales/blob/main/Im%C3%A1genes/OPENSIGNAL.png">|
|       BITalino      | Es un kit de herramietnas de prototipado rápido para proyectos de salud y bienestar personal, Incluye sensores inalámbricos y una plataforma de software para adquirir, procesar y visualizar datos biomédicos |<img width="200" height="150" src="linkfotoMel">|
|     Electrodos      | Son dispositivos diseñados para registrar la actividad eléctrica del corazón |<img width="200" height="150" src="https://github.com/Melanyccb11/Intro_senales/blob/main/Im%C3%A1genes/electrodo.png">|
|    FLUKE ProSim 4   | Dispositivo portátil y avanzado capaz de simular signos vitales. Utiliza tecnología para completar las evaluaciones en menos de un minuto. Entre sus parámetros vitales cuenta con electrocardiograma de 12 derivaciones, la respiración y la presión sanguínea |<img width="200" height="150" src="LinkfotoAle">|
</div>


<a id = "conex"></a>
<h2 style = "text-align: center;">¿Cómo funciona el ECG en un BITalino?</h2>


</h5>

<a id = "metodo" style></a>
<h2 style = "text-align: center;">Metodolodía</h2>

### Configuración de ECG en Bitalino
</p>
De acuerdo con la referencia [a], es necesario conectar los electrodos en el puerto A2 del dispositivo Bitalino. Posteriormente, se debe configurar el Bitalino, empleamos el canal dos para la adquisición de datos de electrocardiograma (ECG) con una frecuencia de muestreo de 1000Hz.</p>

### Colocación de electrodos
</p>
La ubicación de los electrodos se determinó en función de las derivaciones estándar del ECG. Nosotros utilizamos la derivación I de Einthoven, este registra la diferencia de voltaje entre dos puntos específicos del cuerpo: el electrodo positivo (rojo) se sitúa en la brazo iquierdo (LA), mientras que el electrodo negativo (negro) se coloca en el brazo derechho (RA). El punto de referencia (REF) en color blanco se coloca en la cosito. La corriente eléctrica fluye naturalmente de un brazo al otro, y la diferencia de potencial entre estos dos puntos se registra como un trazado en el electrocardiograma.[b] </p>
<p align="center">
 <img width="660" height="400" src="linkposiE">
<h5 align="center">
  Figura N. Posicionamiento de los electrodos. Elaboración propia.
</h5>

### Adquisición de la Señal
</p>
Para este laboratorio utilizamos 5 momentos para el ensayo indicados por la guía [b]. Para el primer momento fue el estado en reposo por 30 segundos con respiración normal (primera medición), seguido de 30 segundos de inhalar-retener-exhalar 5 segundos cada uno (segunda medición) hasta que acabe el tiempo de medición. Posteriormente, se realizaron 2 mediciones para comparar el pre (tercera medición) y post (cuarta medición) actividad física que realizó nuestro objeto de prueba; y por último, se esperó 30 segundos más y seguido se realizó una medición de inhalar-retener-exhalar 10 segundos cada uno por 30 segundos.Todas estas señal fueron adquiridas por el BITalino y se interpretaron en OpenSign para posterior evaluación. Para mejor explicación esto se puede ver en el video [1] </p>

### Adquisición de la Señal
</p>
En esta actividad se simuló un paro cardiaco, en donde se obtieron 5 etapas a lo largo de la simulación, se evaluó la señal en OpenSign. Para configuración de los electrodos siguió la configuración propuesta con respecto a LA, RA y RF.</p>

### Procesamiento de la señal
</p>
Después de la toma de datos, estos se exportaron a una computadora para su ejecución en Python. Aquí, las señales del electrocardiograma (ECG) fueron graficadas y filtradas con el fin de realizar un análisis más detallado.</p>


<a id = "videos"></a>
<h2 style = "text-align: center;">Videos obtenidos</h2>
Los video obtenidos los hemos editado, simulando los diferentes momentos propuestos por la metodolosía, con el objetivo de una mejor visulización de los pasos seguidos <br />
</h5>

<div align="center">
    <video src="link">
</video>
</div>

<h5 align="center">
  Video [1]: Video siguiendo la metodología
</h5>
</h5>

<div align="center">
    <video src="link">
</video>
</div>

<h5 align="center">
  Video [2]: Video la señal con OpenSign
</h5>
</h5>

<div align="center">
    <video src="link">
</video>
</div>

<h5 align="center">
  Video [3]: Video de las etapas del simulador de paro cardiaco en FLUKE ProSim 4 
</h5>
</h5>

<div align="center">
    <video src="link">
</video>
</div>

<h5 align="center">
  Video [4]: Video la señal proviniente del FLUKE ProSim 4 con OpenSign
</h5>
</h5>

<a id = "opensign"></a>
<h2 style = "text-align: center;">Ploteo de la señal en OpenSignals</h2>
 <p align="center">
 Las muestras fueron tomadas a una frecuencia de 1000Hz:
   </p>
 </h5>
 <img width="660" height="400" src="https://github.com/Melanyccb11/Intro_senales/blob/main/Im%C3%A1genes/WhatsApp%20Image%202024-04-12%20at%2010.17.33%20AM.jpeg">
</p>
<h5 align="center">
  Figura 6. Gráfica obtenida en OpenSignals. Elaboración propia.
</h5>

<a id = "explic"></a>
<h2 style = "text-align: center;">Resumen y Explicación de la señal ploteada</h2>

Los picos que se observan en el EMG representan la actividad eléctrica generada por las unidades motoras individuales dentro del músculo. Las unidades motoras son las unidades básicas de contracción muscular y están compuestas por una neurona motora y las fibras musculares que inerva.

Cuando el sistema nervioso envía una señal para que un músculo se contraiga, las unidades motoras se activan secuencialmente en rápida sucesión. Cada unidad motora contribuye con un pequeño potencial de acción al EMG, y la suma de estos potenciales de acción produce el patrón característico de picos en el EMG. 

Sin embargo, estos picos pueden estar afectados por el ruido que producen diferentes dispositivos electrónicos. Por lo tanto, lo que podemos ver en la gráfica vemos tanto las señales de los músculos como el ruido, ya que la toma de datos se realizó sin el protector del Bitalino y había una laptop cerca.


<a id = "archivosenal"></a>
<h2 style = "text-align: center;">Archivo de los datos de la señal ploteada</h2>
</h5>

<p> <a href= text_EMG.txt>Documentos text</a></p>


<a id = "python"></a>
<h2 style = "text-align: center;">Ploteo de la señal en Python</h2>
</p>
Codigo prinicipal:
</p>
<p> <a href= ploteo_de_senial.py>CCodigo proncipal py</a></p>
</p>
Codigo adicional para eliminar archivo de la señal:
</p>
<p> <a href= graficas_se%C3%B1ales_sinruido.py>codigo señal con ruido</a>-[Sin ruido]</p>
</p>
<p> <a href= grafica_se%C3%B1ales_conruido.py>codigo señal con ruido</a>-[Con ruido]</p>
</p>

Las pruebas se realizaron primero en estado de reposo,la cual dura un total de X segundos. Esto se puede observar en la siguiente gráfica.

- Señal sin movimiento:
En las imágenes generadas mediante Python, durante el estado de reposo, se observa la detección de una señal pasados los 4 segundos. Este fenómeno puede interpretarse como la detección de la activación de una unidad motora o bien como la generación de ruido, posiblemente ocasionado por la proximidad del dispositivo Bitalino a la laptop durante la toma de muestras.
</p>
<h5 align="center">
  Figura 7. Señal ploteada sin movimiento aplificada
</h5>

<p align="center">
<img width="660" height="400" src="https://github.com/Melanyccb11/Intro_senales/blob/main/Im%C3%A1genes/estadoreposo.jpeg">
</p>
<h5 align="center">
  Figura 8: Señal obtenida sin movimiento
</h5>

</p>
- Señal con movimiento:
Debido a que la señal era pequeña se amplió la imagen reduciendo la amplitud para una mejor observación de la señal. Se observa un aumento en la amplitud de las señales pasados los 15 segundos. Este incremento sugiere una mayor actividad de las fibras musculares, probablemente relacionada con el movimiento asociado al levantamiento de la botella de agua, ya que al realizar ese movimiento se activa el bíceps braquial.

</p>
<h5 align="center">
 <img width="660" height="400" src="https://github.com/Melanyccb11/Intro_senales/blob/main/Im%C3%A1genes/contraido.jpeg">
</h5>
</p>

<h5 align="center">
  Figura 9: Conexiones del BITalino
</h5>

Además nosotros realizamos un código que se encarga de realizar el filtrado de la señal, esto porque como se puede ver en el video utilizamos el arduino sin carcasa y cerca de una laptop, lo que ocasiona una interferencia y una mala interpretación de los datos.

<p align="center">
<img width="660" height="400" src="https://github.com/Melanyccb11/Intro_senales/blob/main/Im%C3%A1genes/conruido.jpeg">
</p>
<h5 align="center">
  Figura 10:Señal orginal
</h5>
<p align="center">
<img width="660" height="400" src="https://github.com/Melanyccb11/Intro_senales/blob/main/Im%C3%A1genes/after.jpeg">
</p>
<h5 align="center">
  Figura [2]: Señal filtrada en pyton
</h5>



<a id = "Bibliografía"></a>
<h2 style = "text-align: center;">Bibliografía</h2>
[1]	T. Moritani, D. Stegeman, y R. Merletti, “Basic physiology and biophysics of EMG signal generation”, Electromyography. Wiley, pp. 1–25, 12-jul-2004.</p>
[2]	B. Di Donato, “User wearing BITalino to track EMG. Adapted from Dertien”. 2020.</p>
[3]	EXPERIMENTAL GUIDES TO MEET y L. Y. Biosignals, “BITalino (r)evolution Lab Guide”, Pluxbiosignals.com. [En línea]. Disponible en: https://support.pluxbiosignals.com/wp-content/uploads/2022/04/HomeGuide1_EMG.pdf. [Consultado: 13-abr-2024].</p>
[4]	S. Khonsary, “Guyton and hall: Textbook of medical physiology”, Surg. Neurol. Int., vol. 8, núm. 1, p. 275, 2017.</p>
[5]	Visible Body, “Visible Body – Anatomía virtual para observar el interior del cuerpo humano”, Visiblebody.com. [En línea]. Disponible en: https://www.visiblebody.com/es/. [Consultado: 13-abr-2024].</p>
[6]	J. Fox, “19 top brachialis exercises for bigger stronger biceps”, Nutritioneering, 04-abr-2022. .</p>


